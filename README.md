PRTG сенсор для API "MANGO OFFICE"
===============================
Расширенный сенсор системы мониторинга [PRTG](https://www.ru.paessler.com/prtg) для получения данных через "API Коннектор" провайдера ["MANGO OFFICE"](https://www.mango-office.ru/)

###Каналы:
* Баланс
* Кол-во пропущенных вызовов за последние N минут (максимум 43200 минут = 30 дней)

### Требования:
- Для работы требуется подключенная в ЛК услуга ["API коннектор"](https://www.mango-office.ru/products/integraciya/price/#anchor3)
- Установленный пакет Microsoft Visual C++ 

###Для добавления в PRTG:
- Скачайте [последний релиз](https://github.com/sys-admin-su/prtg-sensor-mango-office-api/releases/)
- Разместите prtg-mango-sensor.exe из архива в CustomSensors/EXEXML директории, куда установлен Удалённый зонд.
- Создайте сенсор, выберите тип "Расширенный EXE/XML" и выберите prtg-mango-sensor.exe
- В параметрах запуска укажите через пробел: <Уникальный код АТС> <Ключ для создания подписи> <Период в минутах для забора статистики о пропущенных>
- Время выполнения скрипта может быть до 30 секунд (таймаут ожидания формирования статистики). Учитывайте, когда выставляете частоту сканирования. Рекомендуемое значение - 5-10 минут.
- Все пороговые значения требуется настроить после добавления сенсора и формирования каналов

###Использование:
`prtg-mango-sensor.exe <api_key> <api_salt> <missedcalls_minutes>`  
Например:  
`prtg-mango-sensor.exe api_key api_salt 60` - вернет баланс и кол-во пропущенных звонков за 60 минут.  
`!` Период формирования статистики не может быть более 30 дней (43200 минут)
  
###Дополнительная информация
Для сборки `prtg-mango-sensor.exe` использовался `pytinstaller v3.4` и `python v3.6`

###Лицензия:
Решение распространяется по [лицензии MIT](https://github.com/sys-admin-su/prtg-sensor-mangotelectom-api/blob/main/LICENSE)